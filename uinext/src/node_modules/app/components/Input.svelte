<script>
	import Icon from '@svizzle/ui/src/icons/Icon.svelte';
	import X from '@svizzle/ui/src/icons/feather/X.svelte';

	export let value;
	export let placeholder;

	const reset = () => value = '';
</script>

<div class='Input'>
	<input
		type='text'
		bind:value
		{placeholder}
	/>
	{#if value !== ''}
		<button
			aria-label='Clear search text'
			class='clickable'
			on:click={reset}
		>
			<Icon glyph={X} size=16 strokeWidth='1px' />
		</button>
	{/if}
</div>

<style>
	.Input {
		border: thin solid var(--color-grey-70);
		border-radius: 0.125em;
		display: grid;
		grid-template-columns: 1fr 24px;
		padding: 0.25em;
		width: 100%;
	}

	.Input:focus-within {
		border-width: 2px;
		padding: calc(0.25em - 1px);
	}

	input {
		border: none;
		font-size: 1em;
		width: 100%;
	}
	input:focus {
		outline: none;
		border: none;
	}

	button {
		background: none;
		border: none;
	}
</style>