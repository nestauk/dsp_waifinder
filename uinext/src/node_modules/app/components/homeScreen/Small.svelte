<script>
	import MapWrapper from 'app/components/Map/MapWrapper.svelte';
	import Stub from 'app/components/Stub.svelte';
	import Results from 'app/components/Results/Results.svelte';
	import View from 'app/components/ViewPorts/View.svelte'
	import ViewSelector from 'app/components/ViewSelector.svelte';
	import ViewsSlider from 'app/components/ViewPorts/ViewsSlider.svelte'

	let viewId = 'map';

	export let items = [];
	export let getItemID;
	export let getLink;
	export let getLngLat;

	const showView = id => viewId = id;
</script>

<div class='container'>
	<div class='slider'>
		<ViewsSlider {viewId}>
			<View id='barchart'>
				<Stub color='red' />
			</View>
			<View id='map'>
				<MapWrapper
					{getLink}
					{getLngLat}
					{getItemID}
					{items}
				/>
			</View>
			<View id='results'>
				<Results organizations={items} />
			</View>
		</ViewsSlider>
	</div>
	<div>
		<ViewSelector {showView}/>
	</div>
</div>

<style>
	.container {
		display: grid;
		grid-auto-flow: row;
		grid-template-rows: 1fr min-content;
		height: 100%;
	}
	.slider {
		height: 100%;
		overflow: hidden;
	}
</style>
