<script>
	import {isClientSide} from '@svizzle/ui/src/utils/env';

	import {getStylesheet, makeGetStyleRulesObj} from 'app/utils/svizzle/style';
	import {getURL} from 'app/utils/svizzle/url';

	export let href;
	export let selectorRegex;
	export let styleRules;

	$: hrefURL = isClientSide && href && getURL(href).toString();
	$: allStyleRules = hrefURL
		? [...getStylesheet(hrefURL).cssRules]
		: [];
	$: getStyleRulesObj = makeGetStyleRulesObj(selectorRegex);
	$: styleRules = getStyleRulesObj(allStyleRules);
</script>
