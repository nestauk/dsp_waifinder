<script>
	import { makeStyleVars } from '@svizzle/dom';

	import {createEventDispatcher} from 'svelte';

	export let _screen;
	export let isNarrow = true;
	export let hasBackground = true;
	export let theme;

	const defaultTheme = {
		backgroundColor: 'white',
		boxShadowColor: 'lightgrey',
		borderColor: 'rgb(70, 70, 70)',
	};

	const dispatch = createEventDispatcher();
	const close = () => dispatch('close');

	$: theme = theme ? {...defaultTheme, ...theme} : defaultTheme;
	$: style = makeStyleVars(theme);
</script>

<div
	aria-label="Banner"
	class='Banner clickable {$_screen?.classes}'
	class:bkg={hasBackground}
	on:click={close}
	role='alert'
	{style}
>
	<div
		class:narrow={isNarrow}
		class='inner'
		on:click|stopPropagation
	>
		<slot />
	</div>
</div>

<style>
	.Banner {
		box-shadow: 2px 8px 9px -4px var(--boxShadowColor);
		height: 100%;
		left: 0;
		position: absolute;
		top: 0;
		user-select: none;
		width: 100%;
		z-index: 2000;
	}
	.Banner.bkg {
		background-color: rgba(0, 0, 0, 0.25);
	}
	.inner {
		background: var(--backgroundColor);
		border: thin solid var(--borderColor);
		border-radius: 1rem;
		box-shadow: 2px 8px 9px -4px var(--boxShadowColor);
		cursor: initial;
		display: grid;
		grid-template-rows: 1fr;
		left: 50%;
		max-height: 90%;
		padding: 0.5rem;
		position: absolute;
		overflow: auto;
		top: 50%;
		transform: translate(-50%, -50%);
		width: 90%;
	}
	.medium .inner {
		min-width: 50%;
	}

	.medium .narrow {
		width: min-content;
	}
</style>
