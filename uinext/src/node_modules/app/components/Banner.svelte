<script>
	import { createEventDispatcher } from 'svelte';

	import Icon from '@svizzle/ui/src/icons/Icon.svelte';
	import XCircle from '@svizzle/ui/src/icons/feather/XCircle.svelte';

	export let _screen;
	export let isWide = false;

	const dispatch = createEventDispatcher();
	const close = () => {
		dispatch('close');
	}
</script>

<div
	aria-label="Banner"
	class='Banner clickable {$_screen?.classes}'
	role='alert'
	on:click={close}
>
	<div class='inner' class:narrow={!isWide} on:click|stopPropagation>
		<div class='content'>
			<div class='body'>
				<slot name='body' />
			</div>

			<div class='footer'>
				<slot name='footer' />
			</div>
		</div>
		<button
			aria-label='Close banner'
			class='clickable'
			on:click={close}
		>
			<Icon glyph={XCircle} />
		</button>
	</div>
</div>

<style>
	.Banner {
		background-color: rgba(0, 0, 0, 0.25);
		box-shadow: var(--box-shadow-xy);
		height: 100%;
		left: 0;
		position: absolute;
		top: 0;
		user-select: none;
		width: 100%;
		z-index: var(--z-2000);
	}
	.inner {
		background: white;
		border-radius: 1rem;
		border: thin solid var(--color-grey-70);
		box-shadow: var(--box-shadow-xy);
		left: 50%;
		max-height: 90%;
		padding: 0.5rem;
		position: absolute;
		overflow: auto;
		top: 50%;
		transform: translate(-50%, -50%);
		width: 90%;
	}
	.content {
		height: 100%;
		display: grid;
		grid-template-areas: 'body' 'footer';
		grid-template-rows: 1fr min-content;
		overflow: auto;
	}
	.medium .inner {
		min-width: 50%;
	}

	.medium .narrow {
		width: min-content;
	}

	button {
		background: none;
		border: none;
		padding: 0.5rem;
		position: absolute;
		right: 0;
	}
	.small button {
		bottom: 0;
	}
	.medium button {
		bottom: initial;
		top: 0;
	}

	.body {
		grid-area: body;
		overflow: auto;
	}
	.footer {
		clear: both;
		grid-area: footer;
		padding-top: 1em;
		padding-right: 1em;
		text-align: right;
		font-style: italic;
	}
</style>
