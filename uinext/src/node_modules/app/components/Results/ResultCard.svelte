<script>
	import Link from '@svizzle/ui/src/Link.svelte';
	import Icon from '@svizzle/ui/src/icons/Icon.svelte';
	import LinkIcon from '@svizzle/ui/src/icons/feather/Link.svelte';

	export let item;

	$: postCode = item?.location?.postcode || '';
	$: place = item?.place?.name || '';
	$: sep = (postCode && place) ? ' - ' : '';
	$: address = `${postCode}${sep}${place}`;
</script>

<div>
	<p>
		<span class='name'>{item?.name || ''}</span>
		{#if item?.url}
			<Link
				href={item.url}
				target='_blank'
			>
				<Icon
					glyph={LinkIcon}
					size={20}
				/>
			</Link>
		{/if}
	</p>
	<p class='description'>{item?.description || ''}</p>
	{#if address !== ''}
		<p class='address'>{address}</p>
	{/if}
</div>

<style>
	div {
		padding: 0.35em 0.8em;
	}

	p:not(:last-child) {
		margin: 0.4em 0;
	}

	.name {
		font-size: 1.2em;
	}
	.address {
		font-style: italic;
		text-align: right;
	}

	.description {
		/* These `-webkit` properties work in Firefox and Edge and Safari 15.4. */
		-webkit-box-orient: vertical;
		-webkit-line-clamp: 3;
		display: -webkit-box;
		overflow: hidden;
		text-overflow: ellipsis;
	}
</style>
